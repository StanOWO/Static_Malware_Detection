# Malware Detection / Malware Classification

Purpose: Detect malware in MOTIF dataset using CNN.

To download MOTIF dataset: [click here](https://github.com/boozallen/MOTIF), or you an unzip **MOTIF.7z** in this poject.
![](https://github.com/StanOWO/Static_Malware_Detection/blob/main/proccess.jpeg?row=true)
# About MOTIF 
The disarmed malware samples are provided in this 1.47GB encrypted .7z file, which can be unzipped using the following password:
``` bash
i_assume_all_risk_opening_malware
```
Each file is named in the format MOTIF_MD5, with MD5 indicating the file's hash prior to when it was disarmed.

# About our repository
The project is run in Python 3.11.4 and cuda version 12.3, package dependencies are stored in requirement.txt.

You should download the MOTIF dataset first, then run the code as follow in below:
```
Repository file structure:
    |-- conversion_HW_v2.py
    |-- classification_HW
        |-- data_Inspection.py
        |-- run.py
        |-- model.py
    |-- MOTIF.7z
    |-- Pcap2Img.py
    |-- tempDeleter.py
    |-- uploader.py
    |-- README.md
```
1. **conversion_HW_v2.py**: 

   Turn binary executable into images
2. **data_Inspection.py**: 

   Downscale some classes (init: lower than 40 instances) and turn images into ImageFolder acceptable format.   

    - To get fimilair with ImageFolder, you can reference to [Pytorch documentation](https://pytorch.org/vision/main/generated/torchvision.datasets.ImageFolder.html)
3. **run.py**: 

   Train and test deep learning model.
   - dependency: **classification_HW/model.py**
  
    - dependency: **image_save_data**
   
        -> Our custom dataset. You can also use **classification_HW/data_Inspection.py** to create it on your own.

# Model result
We achieved an accuracy of 80.25% on our custom dataset 'image_save_data'.

# Reference paper
[Malware Images: Visualization and Automatic Classification](https://dl.acm.org/doi/pdf/10.1145/2016904.2016908)

# Credit
- Credit to [**RayminQAQ**](https://github.com/RayminQAQ) for leading the team and creating the entire Machine Learning pipeline, all stored in the '/classification_HW' folder.


- Credit to **[benson5104](https://github.com/benson5104)** for the excellent work on conversion_HW_v2.py.

- Credit to **[StanOWO](https://github.com/StanOWO)** for providing computing resources and beautifying the coding style.


